{"ast":null,"code":"var _jsxFileName = \"/Users/user/code/react18/react-app/src/App.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer, useState } from 'react';\nimport Meals from './components/Meals/Meals';\nimport CartContext from './store/cart-context';\nimport FilterMeals from './components/FilterMeals/FilterMeals';\nimport Cart from './components/Cart/Cart'; //模拟一组食物的数据\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MEALS_DATA = [{\n  id: '1',\n  title: '汉堡包',\n  desc: '百分百纯牛肉配搭爽脆酸瓜洋葱粒与美味番茄酱经典滋味让你无法抵挡！',\n  price: 12,\n  img: '/img/meals/1.png'\n}, {\n  id: '2',\n  title: '双层吉士汉堡',\n  desc: '百分百纯牛肉与双层香软芝，加上松软面包及美味酱料，诱惑无人能挡！',\n  price: 20,\n  img: '/img/meals/2.png'\n}, {\n  id: '3',\n  title: '巨无霸',\n  desc: '两块百分百纯牛肉，搭配生菜、洋葱等新鲜食材，口感丰富，极致美味！',\n  price: 24,\n  img: '/img/meals/3.png'\n}, {\n  id: '4',\n  title: '麦辣鸡腿汉堡',\n  desc: '金黄脆辣的外皮，鲜嫩幼滑的鸡腿肉，多重滋味，一次打动您挑剔的味蕾！',\n  price: 21,\n  img: '/img/meals/4.png'\n}, {\n  id: '5',\n  title: '板烧鸡腿堡',\n  desc: '原块去骨鸡排嫩滑多汁，与翠绿新鲜的生菜和香浓烧鸡酱搭配，口感丰富！',\n  price: 22,\n  img: '/img/meals/5.png'\n}, {\n  id: '6',\n  title: '麦香鸡',\n  desc: '清脆爽口的生菜，金黄酥脆的鸡肉。营养配搭，好滋味的健康选择！',\n  price: 14,\n  img: '/img/meals/6.png'\n}, {\n  id: '7',\n  title: '吉士汉堡包',\n  desc: '百分百纯牛肉与香软芝士融为一体配合美味番茄醬丰富口感一咬即刻涌现！',\n  price: 12,\n  img: '/img/meals/7.png'\n}]; //定义cartReducer\n\nconst cartReducer = (state, action) => {\n  //复制购物车\n  const newCart = { ...state\n  };\n\n  switch (action.type) {\n    case 'ADD':\n      if (newCart.items.indexOf(action.meal) === -1) {\n        newCart.items.push(action.meal);\n        action.meal.amount = 1;\n      } else {\n        action.meal.amount += 1;\n      }\n\n      newCart.totalAmount += 1;\n      newCart.totalPrice += action.meal.price;\n      return newCart;\n\n    case 'REMOVE':\n      action.meal.amount -= 1;\n\n      if (action.meal.amount === 0) {\n        newCart.items.splice(newCart.items.indexOf(action.meal), 1);\n      }\n\n      newCart.totalAmount -= 1;\n      newCart.totalPrice -= action.meal.price;\n      return newCart;\n\n    case 'CLEAR':\n      newCart.items.forEach(item => delete item.amount);\n      newCart.items = [];\n      newCart.totalAmount = 0;\n      newCart.totalPrice = 0;\n\n    default:\n      return state;\n  }\n};\n\nexport default function App() {\n  _s();\n\n  //创建一个state来存储食物列表\n  const [mealsData, setMealsData] = useState(MEALS_DATA); //创建一个state用来存储购物车的数据\n\n  /*\n     1 商品 [] items\n     2 商品总数 totalAmount\n     3 商品总价 totalPrice\n   */\n\n  const [cartData, cartDispatch] = useReducer(cartReducer, {\n    items: [],\n    totalAmount: 0,\n    totalPrice: 0\n  }); // 创建一个过滤meals的函数\n\n  const filterHandler = keyword => {\n    const newMealsData = MEALS_DATA.filter(item => item.title.indexOf(keyword) !== -1);\n    setMealsData(newMealsData);\n  }; //清空购物车\n\n\n  const clearCart = () => {\n    const newCart = { ...cartData\n    }; //需要将购物车中商品数量清零\n    // setCartData(newCart);\n  };\n\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: { ...cartData,\n      cartDispatch\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(FilterMeals, {\n        onFilter: filterHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Meals, {\n        mealsData: mealsData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"KhOBF2Ljumtm97am61cOvePM0iw=\");\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useReducer","useState","Meals","CartContext","FilterMeals","Cart","MEALS_DATA","id","title","desc","price","img","cartReducer","state","action","newCart","type","items","indexOf","meal","push","amount","totalAmount","totalPrice","splice","forEach","item","App","mealsData","setMealsData","cartData","cartDispatch","filterHandler","keyword","newMealsData","filter","clearCart"],"sources":["/Users/user/code/react18/react-app/src/App.jsx"],"sourcesContent":["import React, { useReducer, useState } from 'react';\nimport Meals from './components/Meals/Meals';\nimport CartContext from './store/cart-context';\nimport FilterMeals from './components/FilterMeals/FilterMeals';\nimport Cart from './components/Cart/Cart';\n\n//模拟一组食物的数据\nconst MEALS_DATA = [\n\t{\n\t\tid: '1',\n\t\ttitle: '汉堡包',\n\t\tdesc: '百分百纯牛肉配搭爽脆酸瓜洋葱粒与美味番茄酱经典滋味让你无法抵挡！',\n\t\tprice: 12,\n\t\timg: '/img/meals/1.png',\n\t},\n\t{\n\t\tid: '2',\n\t\ttitle: '双层吉士汉堡',\n\t\tdesc: '百分百纯牛肉与双层香软芝，加上松软面包及美味酱料，诱惑无人能挡！',\n\t\tprice: 20,\n\t\timg: '/img/meals/2.png',\n\t},\n\t{\n\t\tid: '3',\n\t\ttitle: '巨无霸',\n\t\tdesc: '两块百分百纯牛肉，搭配生菜、洋葱等新鲜食材，口感丰富，极致美味！',\n\t\tprice: 24,\n\t\timg: '/img/meals/3.png',\n\t},\n\t{\n\t\tid: '4',\n\t\ttitle: '麦辣鸡腿汉堡',\n\t\tdesc: '金黄脆辣的外皮，鲜嫩幼滑的鸡腿肉，多重滋味，一次打动您挑剔的味蕾！',\n\t\tprice: 21,\n\t\timg: '/img/meals/4.png',\n\t},\n\t{\n\t\tid: '5',\n\t\ttitle: '板烧鸡腿堡',\n\t\tdesc: '原块去骨鸡排嫩滑多汁，与翠绿新鲜的生菜和香浓烧鸡酱搭配，口感丰富！',\n\t\tprice: 22,\n\t\timg: '/img/meals/5.png',\n\t},\n\t{\n\t\tid: '6',\n\t\ttitle: '麦香鸡',\n\t\tdesc: '清脆爽口的生菜，金黄酥脆的鸡肉。营养配搭，好滋味的健康选择！',\n\t\tprice: 14,\n\t\timg: '/img/meals/6.png',\n\t},\n\t{\n\t\tid: '7',\n\t\ttitle: '吉士汉堡包',\n\t\tdesc: '百分百纯牛肉与香软芝士融为一体配合美味番茄醬丰富口感一咬即刻涌现！',\n\t\tprice: 12,\n\t\timg: '/img/meals/7.png',\n\t},\n];\n\n//定义cartReducer\nconst cartReducer = (state, action) => {\n\t//复制购物车\n\tconst newCart = { ...state };\n\n\tswitch (action.type) {\n\t\tcase 'ADD':\n\t\t\tif (newCart.items.indexOf(action.meal) === -1) {\n\t\t\t\tnewCart.items.push(action.meal);\n\t\t\t\taction.meal.amount = 1;\n\t\t\t} else {\n\t\t\t\taction.meal.amount += 1;\n\t\t\t}\n\t\t\tnewCart.totalAmount += 1;\n\t\t\tnewCart.totalPrice += action.meal.price;\n\t\t\treturn newCart;\n\n\t\tcase 'REMOVE':\n\t\t\taction.meal.amount -= 1;\n\t\t\tif (action.meal.amount === 0) {\n\t\t\t\tnewCart.items.splice(newCart.items.indexOf(action.meal), 1);\n\t\t\t}\n\t\t\tnewCart.totalAmount -= 1;\n\t\t\tnewCart.totalPrice -= action.meal.price;\n\t\t\treturn newCart;\n\t\t\n\t\tcase 'CLEAR'\n\t\t\t:newCart.items.forEach((item) => delete item.amount);\n\n\t\tnewCart.items = [];\n\t\tnewCart.totalAmount = 0;\n\t\t\tnewCart.totalPrice = 0;\n\t\t\t\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default function App() {\n\t//创建一个state来存储食物列表\n\tconst [mealsData, setMealsData] = useState(MEALS_DATA);\n\n\t//创建一个state用来存储购物车的数据\n\t/*\n    1 商品 [] items\n    2 商品总数 totalAmount\n    3 商品总价 totalPrice\n  */\n\n\tconst [cartData, cartDispatch] = useReducer(cartReducer, {\n\t\titems: [],\n\t\ttotalAmount: 0,\n\t\ttotalPrice: 0,\n\t});\n\n\t// 创建一个过滤meals的函数\n\tconst filterHandler = (keyword) => {\n\t\tconst newMealsData = MEALS_DATA.filter(\n\t\t\t(item) => item.title.indexOf(keyword) !== -1\n\t\t);\n\t\tsetMealsData(newMealsData);\n\t};\n\n\t//清空购物车\n\tconst clearCart = () => {\n\t\tconst newCart = { ...cartData };\n\t\t//需要将购物车中商品数量清零\n\t\t\n\t\t// setCartData(newCart);\n\t};\n\n\treturn (\n\t\t<CartContext.Provider value={{ ...cartData, cartDispatch }}>\n\t\t\t<div>\n\t\t\t\t<FilterMeals onFilter={filterHandler} />\n\t\t\t\t<Meals mealsData={mealsData} />\n\t\t\t\t<Cart />\n\t\t\t</div>\n\t\t</CartContext.Provider>\n\t);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}