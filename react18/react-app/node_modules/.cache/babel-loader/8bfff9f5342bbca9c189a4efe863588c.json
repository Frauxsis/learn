{"ast":null,"code":"var _jsxFileName = \"/Users/user/code/react18/react-app/src/App.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer, useState } from 'react';\nimport Meals from './components/Meals/Meals';\nimport CartContext from './store/cart-context';\nimport FilterMeals from './components/FilterMeals/FilterMeals';\nimport Cart from './components/Cart/Cart'; //模拟一组食物的数据\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MEALS_DATA = [{\n  id: '1',\n  title: '汉堡包',\n  desc: '百分百纯牛肉配搭爽脆酸瓜洋葱粒与美味番茄酱经典滋味让你无法抵挡！',\n  price: 12,\n  img: '/img/meals/1.png'\n}, {\n  id: '2',\n  title: '双层吉士汉堡',\n  desc: '百分百纯牛肉与双层香软芝，加上松软面包及美味酱料，诱惑无人能挡！',\n  price: 20,\n  img: '/img/meals/2.png'\n}, {\n  id: '3',\n  title: '巨无霸',\n  desc: '两块百分百纯牛肉，搭配生菜、洋葱等新鲜食材，口感丰富，极致美味！',\n  price: 24,\n  img: '/img/meals/3.png'\n}, {\n  id: '4',\n  title: '麦辣鸡腿汉堡',\n  desc: '金黄脆辣的外皮，鲜嫩幼滑的鸡腿肉，多重滋味，一次打动您挑剔的味蕾！',\n  price: 21,\n  img: '/img/meals/4.png'\n}, {\n  id: '5',\n  title: '板烧鸡腿堡',\n  desc: '原块去骨鸡排嫩滑多汁，与翠绿新鲜的生菜和香浓烧鸡酱搭配，口感丰富！',\n  price: 22,\n  img: '/img/meals/5.png'\n}, {\n  id: '6',\n  title: '麦香鸡',\n  desc: '清脆爽口的生菜，金黄酥脆的鸡肉。营养配搭，好滋味的健康选择！',\n  price: 14,\n  img: '/img/meals/6.png'\n}, {\n  id: '7',\n  title: '吉士汉堡包',\n  desc: '百分百纯牛肉与香软芝士融为一体配合美味番茄醬丰富口感一咬即刻涌现！',\n  price: 12,\n  img: '/img/meals/7.png'\n}]; //定义cartReducer\n\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    default:\n      return state;\n  }\n};\n\nexport default function App() {\n  _s();\n\n  //创建一个state来存储食物列表\n  const [mealsData, setMealsData] = useState(MEALS_DATA); //创建一个state用来存储购物车的数据\n\n  /*\n     1 商品 [] items\n     2 商品总数 totalAmount\n     3 商品总价 totalPrice\n   */\n\n  /* const [cartData, setCartData] = useState({\n  \titems: [],\n  \ttotalAmount: 0,\n  \ttotalPrice: 0,\n  }); */\n\n  const [cartData, cartDispatch] = useReducer(cartReducer, {\n    items: [],\n    totalAmount: 0,\n    totalPrice: 0\n  }); // 创建一个过滤meals的函数\n\n  const filterHandler = keyword => {\n    const newMealsData = MEALS_DATA.filter(item => item.title.indexOf(keyword) !== -1);\n    setMealsData(newMealsData);\n  }; //向购物车中添加商品\n\n\n  const addItem = meal => {\n    //meal 要添加进购物车的商品\n    // 对购物车进行复制\n    const newCart = { ...cartData\n    }; //判断购物车中是否存在该商品\n\n    if (newCart.items.indexOf(meal) === -1) {\n      //将meal添加进购物车中\n      newCart.items.push(meal); //修改商品的数量\n\n      meal.amount = 1;\n    } else {\n      //已存在购物车中，增加商品数量\n      meal.amount += 1;\n    } //增加总数\n\n\n    newCart.totalAmount += 1; //增加总金额\n\n    newCart.totalPrice += meal.price; //重新设置购物车\n\n    setCartData(newCart);\n  }; //减少商品数量\n\n\n  const removeItem = meal => {\n    //复制购物车\n    const newCart = { ...cartData\n    }; //减少商品的数量\n\n    meal.amount -= 1; //检查商品数量是否归零\n\n    if (meal.amount === 0) {\n      //从购物车中移除商品\n      newCart.items.splice(newCart.items.indexOf(meal), 1);\n    } //减少总数\n\n\n    newCart.totalAmount -= 1; //减少总金额\n\n    newCart.totalPrice -= meal.price;\n    setCartData(newCart);\n  }; //清空购物车\n\n\n  const clearCart = () => {\n    const newCart = { ...cartData\n    }; //需要将购物车中商品数量清零\n\n    newCart.items.forEach(item => delete item.amount);\n    newCart.items = [];\n    newCart.totalAmount = 0;\n    newCart.totalPrice = 0;\n    setCartData(newCart);\n  };\n\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: { ...cartData,\n      addItem,\n      removeItem,\n      clearCart\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(FilterMeals, {\n        onFilter: filterHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Meals, {\n        mealsData: mealsData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"PDJGZ+d47Yi0XyV0VXOTbF200cc=\");\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useReducer","useState","Meals","CartContext","FilterMeals","Cart","MEALS_DATA","id","title","desc","price","img","cartReducer","state","action","type","App","mealsData","setMealsData","cartData","cartDispatch","items","totalAmount","totalPrice","filterHandler","keyword","newMealsData","filter","item","indexOf","addItem","meal","newCart","push","amount","setCartData","removeItem","splice","clearCart","forEach"],"sources":["/Users/user/code/react18/react-app/src/App.jsx"],"sourcesContent":["import React, { useReducer, useState } from 'react';\nimport Meals from './components/Meals/Meals';\nimport CartContext from './store/cart-context';\nimport FilterMeals from './components/FilterMeals/FilterMeals';\nimport Cart from './components/Cart/Cart';\n\n//模拟一组食物的数据\nconst MEALS_DATA = [\n\t{\n\t\tid: '1',\n\t\ttitle: '汉堡包',\n\t\tdesc: '百分百纯牛肉配搭爽脆酸瓜洋葱粒与美味番茄酱经典滋味让你无法抵挡！',\n\t\tprice: 12,\n\t\timg: '/img/meals/1.png',\n\t},\n\t{\n\t\tid: '2',\n\t\ttitle: '双层吉士汉堡',\n\t\tdesc: '百分百纯牛肉与双层香软芝，加上松软面包及美味酱料，诱惑无人能挡！',\n\t\tprice: 20,\n\t\timg: '/img/meals/2.png',\n\t},\n\t{\n\t\tid: '3',\n\t\ttitle: '巨无霸',\n\t\tdesc: '两块百分百纯牛肉，搭配生菜、洋葱等新鲜食材，口感丰富，极致美味！',\n\t\tprice: 24,\n\t\timg: '/img/meals/3.png',\n\t},\n\t{\n\t\tid: '4',\n\t\ttitle: '麦辣鸡腿汉堡',\n\t\tdesc: '金黄脆辣的外皮，鲜嫩幼滑的鸡腿肉，多重滋味，一次打动您挑剔的味蕾！',\n\t\tprice: 21,\n\t\timg: '/img/meals/4.png',\n\t},\n\t{\n\t\tid: '5',\n\t\ttitle: '板烧鸡腿堡',\n\t\tdesc: '原块去骨鸡排嫩滑多汁，与翠绿新鲜的生菜和香浓烧鸡酱搭配，口感丰富！',\n\t\tprice: 22,\n\t\timg: '/img/meals/5.png',\n\t},\n\t{\n\t\tid: '6',\n\t\ttitle: '麦香鸡',\n\t\tdesc: '清脆爽口的生菜，金黄酥脆的鸡肉。营养配搭，好滋味的健康选择！',\n\t\tprice: 14,\n\t\timg: '/img/meals/6.png',\n\t},\n\t{\n\t\tid: '7',\n\t\ttitle: '吉士汉堡包',\n\t\tdesc: '百分百纯牛肉与香软芝士融为一体配合美味番茄醬丰富口感一咬即刻涌现！',\n\t\tprice: 12,\n\t\timg: '/img/meals/7.png',\n\t},\n];\n\n//定义cartReducer\nconst cartReducer = (state, action) => {\n\tswitch (action.type){\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default function App() {\n\t//创建一个state来存储食物列表\n\tconst [mealsData, setMealsData] = useState(MEALS_DATA);\n\n\t//创建一个state用来存储购物车的数据\n\t/*\n    1 商品 [] items\n    2 商品总数 totalAmount\n    3 商品总价 totalPrice\n  */\n\n\t/* const [cartData, setCartData] = useState({\n\t\titems: [],\n\t\ttotalAmount: 0,\n\t\ttotalPrice: 0,\n\t}); */\n\n\tconst [cartData,cartDispatch]=useReducer(cartReducer,{\n\t\titems: [],\n\t\ttotalAmount: 0,\n\t\ttotalPrice: 0,\n\t} )\n\n\t// 创建一个过滤meals的函数\n\tconst filterHandler = (keyword) => {\n\t\tconst newMealsData = MEALS_DATA.filter(\n\t\t\t(item) => item.title.indexOf(keyword) !== -1\n\t\t);\n\t\tsetMealsData(newMealsData);\n\t};\n\n\t//向购物车中添加商品\n\tconst addItem = (meal) => {\n\t\t//meal 要添加进购物车的商品\n\t\t// 对购物车进行复制\n\t\tconst newCart = { ...cartData };\n\n\t\t//判断购物车中是否存在该商品\n\t\tif (newCart.items.indexOf(meal) === -1) {\n\t\t\t//将meal添加进购物车中\n\t\t\tnewCart.items.push(meal);\n\t\t\t//修改商品的数量\n\t\t\tmeal.amount = 1;\n\t\t} else {\n\t\t\t//已存在购物车中，增加商品数量\n\t\t\tmeal.amount += 1;\n\t\t}\n\n\t\t//增加总数\n\t\tnewCart.totalAmount += 1;\n\t\t//增加总金额\n\t\tnewCart.totalPrice += meal.price;\n\n\t\t//重新设置购物车\n\t\tsetCartData(newCart);\n\t};\n\n\t//减少商品数量\n\tconst removeItem = (meal) => {\n\t\t//复制购物车\n\t\tconst newCart = { ...cartData };\n\n\t\t//减少商品的数量\n\t\tmeal.amount -= 1;\n\n\t\t//检查商品数量是否归零\n\t\tif (meal.amount === 0) {\n\t\t\t//从购物车中移除商品\n\t\t\tnewCart.items.splice(newCart.items.indexOf(meal), 1);\n\t\t}\n\n\t\t//减少总数\n\t\tnewCart.totalAmount -= 1;\n\t\t//减少总金额\n\t\tnewCart.totalPrice -= meal.price;\n\n\t\tsetCartData(newCart);\n\t};\n\n\t//清空购物车\n\tconst clearCart = () => {\n\t\tconst newCart = { ...cartData };\n\t\t//需要将购物车中商品数量清零\n\t\tnewCart.items.forEach((item) => delete item.amount);\n\n\t\tnewCart.items = [];\n\t\tnewCart.totalAmount = 0;\n\t\tnewCart.totalPrice = 0;\n\t\tsetCartData(newCart);\n\t};\n\n\treturn (\n\t\t<CartContext.Provider\n\t\t\tvalue={{ ...cartData, addItem, removeItem, clearCart }}\n\t\t>\n\t\t\t<div>\n\t\t\t\t<FilterMeals onFilter={filterHandler} />\n\t\t\t\t<Meals mealsData={mealsData} />\n\t\t\t\t<Cart />\n\t\t\t</div>\n\t\t</CartContext.Provider>\n\t);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}