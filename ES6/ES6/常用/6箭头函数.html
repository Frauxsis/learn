<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>箭头函数</title>
		<script>
			/* 
            作用：  定义匿名函数
            
            基本语法：
                * 没有参数： () => console.Log("xxxx")
                * 一个参数： i => i+2
                * 大于一个参数：（i, j) =＞ i+j
                * 函数体不用大括号：默认返回结果
                * 函数体如果有多个语句，需要用 {} 包围，若有需要返回的内容，需要手动返回
           
            使用场景：多用来定义回调函数

            箭头函数的特点：
            1、简洁
                箭头函数没有自己的this，箭头函数的this不是调用的时候决定的，
                而是在定义的时候处在的对象就是她的this
            3、扩展理解：
                箭头函数的this看外层是否有函数，
                    如果有，外层函数的this就是内部箭头函数的this,
                    如果没有，则this是window。
            
            */
		</script>
	</head>
	<body>
		<button id="btn1">测试箭头函数this-1</button>
		<button id="btn2">测试箭头函数this-2</button>
		<script>
			//let fun = function () {console.log("这是箭头函数");};

			let fun = () => console.log("这是箭头函数");
			fun();

			// 形参的情况
			// 1 没有形参， () 不可省略
			let fun1 = () => console.log("这是箭头函数");
			fun1();
			// 2 只有一个形参， () 可省略
			let fun2 = (a) => console.log(a);
			fun2("aaa");
			// 3 两个及以上形参， () 不可省略
			let fun3 = (x, y) => console.log(x, y);
			fun3(23, 65);

			// 函数体的情况
			// 1 函数体只有一条语句或是表达式时，  {} 可省略-->会自动返回语句执行的结果或者是表达式的结果
			let fun4 = (x, y) => x + y; //x+y是运算表达式  =  { return x + y; }
			console.log(fun4(1, 4));
			// 2 函数体不止一条语句或是表达式时， {} 不可省略
			let fun5 = (x, y) => {
				console.log(x, y);
				return x + y;
			};
			console.log(fun5(2, 9));

			//
			//
			let btn1 = document.getElementById("btn1");
			let btn2 = document.getElementById("btn2");

			btn1.onclick = function () {
				console.log(this); //btn1
			};

			/* btn2.onclick = () => {
				console.log(this); //window
			}; */

			/* let obj = {
				name: "箭头函数",
				getName() {
					btn2.onclick = () => {
						console.log(this); //obj
					};
				},
			};
			obj.getName(); */

			let obj = {
				name: "箭头函数",
				getName: () => {
					btn2.onclick = () => {
						console.log(this); //window
					};
				},
			};
			obj.getName();
		</script>
	</body>
</html>
